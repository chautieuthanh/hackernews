<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>RestClient.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">debugAndroidTest</a> &gt; <a href="index.source.html" class="el_package">com.tt.tc.hackernews.service</a> &gt; <span class="el_source">RestClient.java</span></div><h1>RestClient.java</h1><pre class="source lang-java linenums">package com.tt.tc.hackernews.service;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.tt.tc.hackernews.service.api.CommentLoader;
import com.tt.tc.hackernews.service.api.ItemLoader;
import com.tt.tc.hackernews.service.api.TopItemLoader;

import retrofit2.Retrofit;
import retrofit2.adapter.rxjava2.RxJava2CallAdapterFactory;
import retrofit2.converter.gson.GsonConverterFactory;

/**
 * Created by smu (Chau) on 4/3/18.
 */

public class RestClient {
    private static RestClient instance;
    private ItemLoader itemLoader;
    private TopItemLoader topItemLoader;
    private CommentLoader commentLoader;
    private Retrofit retrofit;
    private void init(){
<span class="fc" id="L24">        Gson gson = new GsonBuilder()</span>
<span class="fc" id="L25">                .setLenient()</span>
<span class="fc" id="L26">                .create();</span>
<span class="fc" id="L27">        retrofit = new Retrofit.Builder()</span>
<span class="fc" id="L28">                .baseUrl(&quot;https://hacker-news.firebaseio.com/v0/&quot;)</span>
<span class="fc" id="L29">                .addCallAdapterFactory(RxJava2CallAdapterFactory.create())</span>
<span class="fc" id="L30">                .addConverterFactory(GsonConverterFactory.create(gson))</span>
<span class="fc" id="L31">                .build();</span>
<span class="fc" id="L32">    }</span>

<span class="fc" id="L34">    public RestClient(){</span>
<span class="fc" id="L35">        init();</span>
<span class="fc" id="L36">    }</span>

    public static RestClient getInstance(){
<span class="fc bfc" id="L39" title="All 2 branches covered.">        if(instance == null){</span>
<span class="fc" id="L40">            instance = new RestClient();</span>
        }
<span class="fc" id="L42">        return instance;</span>
    }

    public ItemLoader getItemLoader(){
<span class="fc bfc" id="L46" title="All 2 branches covered.">        if (itemLoader == null){</span>
<span class="fc" id="L47">            itemLoader = retrofit.create(ItemLoader.class);</span>
        }
<span class="fc" id="L49">        return itemLoader;</span>
    }

    public TopItemLoader getTopItemLoader(){
<span class="fc bfc" id="L53" title="All 2 branches covered.">        if (topItemLoader == null){</span>
<span class="fc" id="L54">            topItemLoader = retrofit.create(TopItemLoader.class);</span>
        }
<span class="fc" id="L56">        return topItemLoader;</span>
    }

    public CommentLoader getCommentLoader(){
<span class="fc bfc" id="L60" title="All 2 branches covered.">        if (commentLoader == null){</span>
<span class="fc" id="L61">            commentLoader = retrofit.create(CommentLoader.class);</span>
        }
<span class="fc" id="L63">        return commentLoader;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span>Generated by the Android Gradle plugin 2.3.3</div></body></html>